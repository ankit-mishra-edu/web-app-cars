"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[849],{6172:(qe,A,l)=>{l.r(A),l.d(A,{SalesModule:()=>Ue});var a=l(6895),m=l(5294),u=l(2824),S=l(8434),i=l(433);class P{constructor(o){this._formBuilder=o}InitForm(){return this.salesForm=this._formBuilder.group({id:[null,[]],dateOfPurchase:[(new Date).toISOString().substring(0,10),[]],sellingPrice:[0,[i.kI.max(1e6)]],cars:[[],i.kI.required],customers:[[],i.kI.required]}),this.salesForm}}class L{constructor(o){this._formBuilder=o}InitForm(){return this.salesFilterForm=this._formBuilder.group({filter:["SalesID",[i.kI.required]]}),this.salesFilterForm}}var f=l(7579),g=l(2722),h=l(8505),e=l(4650),F=l(529);let U=(()=>{class t{constructor(r){this._http=r,this._CARS_URL=`/${u.sh.config.base.home}/${u.sh.config.car.root}/`,this.cars$=()=>this._http.get(this._CARS_URL),this.deleteSale$=s=>this._http.delete(`${this._CARS_URL}${s}/`)}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(F.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),y=(()=>{class t{constructor(r){this._http=r,this._SALES_URL=`/${u.sh.config.base.home}/${u.sh.config.sale.root}/`,this.sales$=()=>this._http.get(this._SALES_URL),this.saleById$=s=>this._http.get(`${this._SALES_URL}${s}/`),this.CreateSale$=s=>this._http.post(this._SALES_URL,s),this.UpdateSale$=s=>this._http.patch(`${this._SALES_URL}${s.id}/`,s),this.deleteSale$=s=>this._http.delete(`${this._SALES_URL}${s}/`)}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(F.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),q=(()=>{class t{constructor(r){this._http=r,this._CUSTOMERS_URL=`/${u.sh.config.base.home}/${u.sh.config.customer.root}/`,this.customers$=()=>this._http.get(this._CUSTOMERS_URL),this.deleteSale$=s=>this._http.delete(`${this._CUSTOMERS_URL}${s}/`)}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(F.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _=l(3099),v=l(8330),p=l(1135),b=l(8675),x=l(8372),Z=l(1884),I=l(6451);let M=(()=>{class t{constructor(r){this._speechService=r,this._listenClicksSubject$=new f.x,this._listenClicks$=this._listenClicksSubject$.asObservable(),this._placeholderSubject$=new p.X(""),this._placeholder$=this._placeholderSubject$.asObservable().pipe((0,_.B)(),(0,b.O)("home"),(0,x.b)(500),(0,Z.x)((s,n)=>JSON.stringify(s)===JSON.stringify(n))),this._filterCarsTypedKeywordsSubject$=new p.X(""),this._filterCarsTypedKeywords$=this._filterCarsTypedKeywordsSubject$.asObservable().pipe((0,_.B)(),(0,b.O)(""),(0,x.b)(500),(0,Z.x)((s,n)=>JSON.stringify(s)===JSON.stringify(n))),this._filterCarsKeywords$=(0,I.T)(this._speechService.spokenKeywords$,this._filterCarsTypedKeywords$)}get listenClicks$(){return this._listenClicks$}set listenClicks(r){this._listenClicksSubject$.next(r)}get placeholder$(){return this._placeholder$}set placeholder(r){this._placeholderSubject$.next(r)}set filterCarsTypedKeywords(r){this._filterCarsTypedKeywordsSubject$.next(r)}get filterCarsKeywords$(){return this._filterCarsKeywords$}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(v.v))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function K(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"div",1)(1,"input",2),e.NdJ("ngModelChange",function(n){e.CHM(r);const c=e.oxw();return e.KtG(c.filterCarsTypedKeywords=n)}),e.ALo(2,"async"),e.qZA(),e.TgZ(3,"span",3),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.listenClicks="1")}),e._UZ(4,"i",4),e.qZA()()}if(2&t){const r=o.ngIf,s=e.oxw();e.xp6(1),e.Q6J("ngClass",s.width)("ngModel",e.lcZ(2,3,s.filterCarsKeywords$))("placeholder","Search "+r+"...")}}let j=(()=>{class t{constructor(r,s){this._speechService=r,this._filterCarsStore=s,this.destroy$=new f.x,this.width="w-24"}ngOnInit(){this._filterCarsStore.listenClicks$.pipe((0,g.R)(this.destroy$),(0,h.b)(()=>this._speechService.listen()),(0,_.B)()).subscribe()}get placeholder$(){return this._filterCarsStore.placeholder$}set filterCarsTypedKeywords(r){this._filterCarsStore.filterCarsTypedKeywords=r}get filterCarsKeywords$(){return this._filterCarsStore.filterCarsKeywords$}get listenClicks$(){return this._filterCarsStore.listenClicks$}set listenClicks(r){this._filterCarsStore.listenClicks=r}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(v.v),e.Y36(M))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-filter-cars"]],inputs:{width:"width"},decls:2,vars:3,consts:[["class","flex flex-row content-center w-full px-2 form",4,"ngIf"],[1,"flex","flex-row","content-center","w-full","px-2","form"],["type","search",1,"text-black",3,"ngClass","ngModel","placeholder","ngModelChange"],[1,"ml-auto","mr-2","btn","left-pan",3,"click"],[1,"bi","bi-mic-fill"]],template:function(r,s){1&r&&(e.YNc(0,K,5,5,"div",0),e.ALo(1,"async")),2&r&&e.Q6J("ngIf",e.lcZ(1,1,s.placeholder$))},dependencies:[a.mk,a.O5,i.Fj,i.JJ,i.On,a.Ov],styles:[".form[_ngcontent-%COMP%]{position:relative}.form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;right:17px;top:3px;padding:2px;border-left:1px solid #d1d5db}.form[_ngcontent-%COMP%]   .left-pan[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-left:10px}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none}.form[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%]{-webkit-appearance:textfield;box-sizing:initial;font-family:inherit;font-size:100%}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-search-decoration, .form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-search-cancel-button{display:none}.form[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%]{border:solid 1px #ccc;padding:5px 50px 5px 20px;border-radius:10em;transition:all .5s}.form[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%]:focus{background-color:#fff;border-color:#66cc75;box-shadow:0 0 5px #6dcff680}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-moz-placeholder{color:#999}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#999}"]}),t})(),J=(()=>{class t{constructor(r){this._speechService=r,this._listenClicksSubject$=new f.x,this._listenClicks$=this._listenClicksSubject$.asObservable(),this._placeholderSubject$=new p.X(""),this._placeholder$=this._placeholderSubject$.asObservable().pipe((0,_.B)(),(0,b.O)("home"),(0,x.b)(500),(0,Z.x)((s,n)=>JSON.stringify(s)===JSON.stringify(n))),this._filterCustomersTypedKeywordsSubject$=new p.X(""),this._filterCustomersTypedKeywords$=this._filterCustomersTypedKeywordsSubject$.asObservable().pipe((0,_.B)(),(0,b.O)(""),(0,x.b)(500),(0,Z.x)((s,n)=>JSON.stringify(s)===JSON.stringify(n))),this._filterCustomersKeywords$=(0,I.T)(this._speechService.spokenKeywords$,this._filterCustomersTypedKeywords$)}get listenClicks$(){return this._listenClicks$}set listenClicks(r){this._listenClicksSubject$.next(r)}get placeholder$(){return this._placeholder$}set placeholder(r){this._placeholderSubject$.next(r)}set filterCustomersTypedKeywords(r){this._filterCustomersTypedKeywordsSubject$.next(r)}get filterCustomersKeywords$(){return this._filterCustomersKeywords$}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(v.v))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function N(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"div",1)(1,"input",2),e.NdJ("ngModelChange",function(n){e.CHM(r);const c=e.oxw();return e.KtG(c.filterCustomersTypedKeywords=n)}),e.ALo(2,"async"),e.qZA(),e.TgZ(3,"span",3),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.listenClicks="1")}),e._UZ(4,"i",4),e.qZA()()}if(2&t){const r=o.ngIf,s=e.oxw();e.xp6(1),e.Q6J("ngClass",s.width)("ngModel",e.lcZ(2,3,s.filterCustomersKeywords$))("placeholder","Search "+r+"...")}}let B=(()=>{class t{constructor(r,s){this._speechService=r,this._filterCustomersStore=s,this.destroy$=new f.x,this.width="w-24"}ngOnInit(){this._filterCustomersStore.listenClicks$.pipe((0,g.R)(this.destroy$),(0,h.b)(()=>this._speechService.listen()),(0,_.B)()).subscribe()}get placeholder$(){return this._filterCustomersStore.placeholder$}set filterCustomersTypedKeywords(r){this._filterCustomersStore.filterCustomersTypedKeywords=r}get filterCustomersKeywords$(){return this._filterCustomersStore.filterCustomersKeywords$}get listenClicks$(){return this._filterCustomersStore.listenClicks$}set listenClicks(r){this._filterCustomersStore.listenClicks=r}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(v.v),e.Y36(J))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-filter-customers"]],inputs:{width:"width"},decls:2,vars:3,consts:[["class","flex flex-row content-center w-full px-2 form",4,"ngIf"],[1,"flex","flex-row","content-center","w-full","px-2","form"],["type","search",1,"text-black",3,"ngClass","ngModel","placeholder","ngModelChange"],[1,"ml-auto","mr-2","btn","left-pan",3,"click"],[1,"bi","bi-mic-fill"]],template:function(r,s){1&r&&(e.YNc(0,N,5,5,"div",0),e.ALo(1,"async")),2&r&&e.Q6J("ngIf",e.lcZ(1,1,s.placeholder$))},dependencies:[a.mk,a.O5,i.Fj,i.JJ,i.On,a.Ov],styles:[".form[_ngcontent-%COMP%]{position:relative}.form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;right:17px;top:3px;padding:2px;border-left:1px solid #d1d5db}.form[_ngcontent-%COMP%]   .left-pan[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-left:10px}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none}.form[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%]{-webkit-appearance:textfield;box-sizing:initial;font-family:inherit;font-size:100%}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-search-decoration, .form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-search-cancel-button{display:none}.form[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%]{border:solid 1px #ccc;padding:5px 50px 5px 20px;border-radius:10em;transition:all .5s}.form[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%]:focus{background-color:#fff;border-color:#66cc75;box-shadow:0 0 5px #6dcff680}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-moz-placeholder{color:#999}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#999}"]}),t})();var T=l(9841),w=l(4004);let Q=(()=>{class t{constructor(){this._carSubject=new p.X({}),this._carFilterKeySubject=new p.X("CarID")}get car$(){return this._carSubject.asObservable()}set car(r){this._carSubject.next(r)}get carFilterKey$(){return this._carFilterKeySubject.asObservable()}set carFilterKey(r){this._carFilterKeySubject.next(r)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),D=(()=>{class t{constructor(r,s){this._carsStore=r,this._filterCarsStore=s}transform(r){return this._filterCarsStore.placeholder="By Car id",this._filterCarsStore.filterCarsTypedKeywords="",(0,T.a)([r,this._carsStore.carFilterKey$,this._filterCarsStore.filterCarsKeywords$]).pipe((0,w.U)(([s,n,c])=>""===c&&"CarID"!==n?s:s.filter(d=>d.id.toString().replaceAll(" ","").toUpperCase().includes(c.replaceAll(" ","").toUpperCase()))))}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(Q,16),e.Y36(M,16))},t.\u0275pipe=e.Yjl({name:"filterCars",type:t,pure:!0}),t})(),E=(()=>{class t{constructor(){this._customerSubject=new p.X({}),this._customerFilterKeySubject=new p.X("CustomerID")}get customer$(){return this._customerSubject.asObservable()}set customer(r){this._customerSubject.next(r)}get customerFilterKey$(){return this._customerFilterKeySubject.asObservable()}set customerFilterKey(r){this._customerFilterKeySubject.next(r)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),V=(()=>{class t{constructor(r,s){this._customersStore=r,this._filterCustomersStore=s}transform(r){return this._filterCustomersStore.placeholder="By Customer id",this._filterCustomersStore.filterCustomersTypedKeywords="",(0,T.a)([r,this._customersStore.customerFilterKey$,this._filterCustomersStore.filterCustomersKeywords$]).pipe((0,w.U)(([s,n,c])=>""===c&&"CustomerID"!==n?s:s.filter(d=>d.id.toString().replaceAll(" ","").toUpperCase().includes(c.replaceAll(" ","").toUpperCase()))))}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(E,16),e.Y36(J,16))},t.\u0275pipe=e.Yjl({name:"filterCustomers",type:t,pure:!0}),t})();function R(t,o){1&t&&(e.TgZ(0,"small",21),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Date Of Purchase is Mandatory."))}function z(t,o){1&t&&(e.TgZ(0,"small",21),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Selling Price is Mandatory."))}function X(t,o){if(1&t&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&t){const r=o.$implicit;e.Q6J("value",r),e.xp6(1),e.hij(" ",r.id," ")}}function G(t,o){1&t&&(e.TgZ(0,"small",21),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Select at least 1 Car."))}function H(t,o){if(1&t&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&t){const r=o.$implicit;e.Q6J("value",r),e.xp6(1),e.hij(" ",r.id," ")}}function W(t,o){1&t&&(e.TgZ(0,"small",21),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Select at least 1 Customer."))}const O=function(t,o){return{"is-invalid":t,"is-valid":o}},ee=function(t,o){return{"form-valid":t,"form-invalid":o}};let te=(()=>{class t{constructor(r,s,n,c,d,C){this._router=r,this._route=s,this._formBuilder=n,this._carsService=c,this._salesService=d,this._customersService=C,this.destroy$=new f.x,this.isValid=S.J,this.isInValid=S.T,this.SALES_PATH=u.x$.config.sale}ngOnInit(){this._salesFormObj=new P(this._formBuilder),this.salesForm=this._salesFormObj.InitForm(),this.cars$=this._carsService.cars$(),this.customers$=this._customersService.customers$()}value(r){return this.salesForm.controls[r]}CreateSale(){console.log(this.salesForm.value),this._salesService.CreateSale$(this.salesForm.value).pipe((0,g.R)(this.destroy$),(0,h.b)(()=>this._router.navigate([this.SALES_PATH.viewAll],{relativeTo:this._route.parent}))).subscribe()}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(m.F0),e.Y36(m.gz),e.Y36(i.qu),e.Y36(U),e.Y36(y),e.Y36(q))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-create-sale"]],decls:38,vars:36,consts:[[1,"create-sale","form-wrapper"],[1,"form-group",3,"formGroup","ngSubmit"],[1,"form-heading"],[1,"grid","grid-cols-2","gap-4"],[1,"form-group","dateOfPurchase"],["for","dateOfPurchase",1,"form-label","required"],["readonly","","type","date","id","dateOfPurchase","formControlName","dateOfPurchase",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","SellingPrice"],["for","sellingPrice",1,"form-label","required"],["max","1000000","type","number","id","sellingPrice","formControlName","sellingPrice",1,"form-control",3,"ngClass"],[1,"form-group","Cars"],["for","cars",1,"form-label","required"],[1,"mb-3"],["width","w-full"],["multiple","","id","cars","formControlName","cars",1,"form-select",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","Customers"],["for","customers",1,"form-label","required"],["multiple","","id","customers","formControlName","customers",1,"form-select",3,"ngClass"],["type","submit",1,"btn",3,"disabled","ngClass"],[1,"invalid-feedback"],[3,"value"]],template:function(r,s){1&r&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return s.CreateSale()}),e.TgZ(2,"legend",2),e._uU(3,"Create Sale"),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Date Of Purchase"),e.qZA(),e._UZ(8,"input",6),e.YNc(9,R,2,1,"small",7),e.qZA(),e.TgZ(10,"div",8)(11,"label",9),e._uU(12,"Selling Price"),e.qZA(),e._UZ(13,"input",10),e.YNc(14,z,2,1,"small",7),e.qZA()(),e.TgZ(15,"div",3)(16,"div",11)(17,"label",12),e._uU(18,"Cars"),e.qZA(),e.TgZ(19,"div",13),e._UZ(20,"app-filter-cars",14),e.qZA(),e.TgZ(21,"select",15),e.YNc(22,X,2,2,"option",16),e.ALo(23,"async"),e.ALo(24,"filterCars"),e.qZA(),e.YNc(25,G,2,1,"small",7),e.qZA(),e.TgZ(26,"div",17)(27,"label",18),e._uU(28,"Customers"),e.qZA(),e.TgZ(29,"div",13),e._UZ(30,"app-filter-customers",14),e.qZA(),e.TgZ(31,"select",19),e.YNc(32,H,2,2,"option",16),e.ALo(33,"async"),e.ALo(34,"filterCustomers"),e.qZA(),e.YNc(35,W,2,1,"small",7),e.qZA()(),e.TgZ(36,"button",20),e._uU(37," Create "),e.qZA()()()),2&r&&(e.xp6(1),e.Q6J("formGroup",s.salesForm),e.xp6(7),e.Q6J("ngClass",e.WLB(21,O,s.isInValid(s.value("dateOfPurchase")),s.isValid(s.value("dateOfPurchase")))),e.xp6(1),e.Q6J("ngIf",s.value("dateOfPurchase").touched&&(null==s.value("dateOfPurchase").errors?null:s.value("dateOfPurchase").errors.required)),e.xp6(4),e.Q6J("ngClass",e.WLB(24,O,s.isInValid(s.value("sellingPrice")),s.isValid(s.value("sellingPrice")))),e.xp6(1),e.Q6J("ngIf",s.value("sellingPrice").touched&&(null==s.value("sellingPrice").errors?null:s.value("sellingPrice").errors.required)),e.xp6(7),e.Q6J("ngClass",e.WLB(27,O,s.isInValid(s.value("cars")),s.isValid(s.value("cars")))),e.xp6(1),e.Q6J("ngForOf",e.lcZ(23,13,e.lcZ(24,15,s.cars$))),e.xp6(3),e.Q6J("ngIf",s.value("cars").touched&&(null==s.value("cars").errors?null:s.value("cars").errors.required)),e.xp6(6),e.Q6J("ngClass",e.WLB(30,O,s.isInValid(s.value("customers")),s.isValid(s.value("customers")))),e.xp6(1),e.Q6J("ngForOf",e.lcZ(33,17,e.lcZ(34,19,s.customers$))),e.xp6(3),e.Q6J("ngIf",s.value("customers").touched&&(null==s.value("customers").errors?null:s.value("customers").errors.required)),e.xp6(1),e.Q6J("disabled",s.salesForm.invalid)("ngClass",e.WLB(33,ee,!s.salesForm.invalid,s.salesForm.invalid)))},dependencies:[a.mk,a.sg,a.O5,i._Y,i.YN,i.Kr,i.Fj,i.wV,i.K7,i.JJ,i.JL,i.Fd,i.sg,i.u,j,B,a.Ov,D,V]}),t})();var re=l(4132);let $=(()=>{class t{constructor(){this._saleSubject=new p.X({}),this._saleFilterKeySubject=new p.X("SalesID")}get sale$(){return this._saleSubject.asObservable()}set sale(r){this._saleSubject.next(r)}get saleFilterKey$(){return this._saleFilterKeySubject.asObservable()}set saleFilterKey(r){this._saleFilterKeySubject.next(r)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function se(t,o){if(1&t&&(e.TgZ(0,"span",8),e._uU(1),e.qZA()),2&t){const r=o.$implicit;e.xp6(1),e.hij(" ",r.id+",","")}}let oe=(()=>{class t{constructor(r,s,n,c){this._router=r,this._route=s,this._salesStore=n,this._salesService=c,this.onSaleDelete=new e.vpe,this.destroy$=new f.x,this.SALE_PATH=u.x$.config.sale}EditSale(r){this._salesStore.sale=r,this._router.navigate([this.SALE_PATH.viewOrEdit,r.id,"edit"],{relativeTo:this._route.parent})}ViewSale(r){this._salesStore.sale=r,this._router.navigate([this.SALE_PATH.viewOrEdit,r.id,"view"],{relativeTo:this._route.parent})}DeleteSale(r){confirm(`Do you want to delete the Sale with name ${r.id} ?\n\nIt will delete the other entities using this sale.`)&&this._salesService.deleteSale$(r.id).pipe((0,g.R)(this.destroy$),(0,h.b)(()=>this.onSaleDelete.emit(r))).subscribe()}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(m.F0),e.Y36(m.gz),e.Y36($),e.Y36(y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-sale"]],inputs:{sale:["filteredSale","sale"],saleIndex:["filteredSaleIndex","saleIndex"]},outputs:{onSaleDelete:"onSaleDelete"},decls:34,vars:4,consts:[[1,"mx-5","my-3","table-responsive"],[1,"table","w-full","text-sm","bg-gray-300","border-collapse","dark:text-white","dark:bg-gray-700"],[1,"rounded-xl"],["class","px-0.5",4,"ngFor","ngForOf"],[3,"click"],["aria-hidden","true",1,"cursor-pointer","bi","bi-eye-fill","primary"],["aria-hidden","true",1,"cursor-pointer","bi","bi-pencil-square","secondary"],["aria-hidden","true",1,"cursor-pointer","bi","bi-archive-fill","danger"],[1,"px-0.5"]],template:function(r,s){1&r&&(e.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr",2)(4,"th"),e._uU(5,"#"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"ID"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Date Of Purchase"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Customer"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"View"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Edit"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Delete"),e.qZA()()(),e.TgZ(18,"tbody")(19,"tr")(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.qZA(),e.TgZ(26,"td"),e.YNc(27,se,2,1,"span",3),e.qZA(),e.TgZ(28,"td",4),e.NdJ("click",function(){return s.ViewSale(s.sale)}),e._UZ(29,"i",5),e.qZA(),e.TgZ(30,"td",4),e.NdJ("click",function(){return s.EditSale(s.sale)}),e._UZ(31,"i",6),e.qZA(),e.TgZ(32,"td",4),e.NdJ("click",function(){return s.DeleteSale(s.sale)}),e._UZ(33,"i",7),e.qZA()()()()()),2&r&&(e.xp6(21),e.Oqu(s.saleIndex),e.xp6(2),e.Oqu(s.sale.id),e.xp6(2),e.Oqu(s.sale.dateOfPurchase),e.xp6(2),e.Q6J("ngForOf",s.sale.customers))},dependencies:[a.sg],styles:[".table-responsive[_ngcontent-%COMP%]{margin:15px 30px;background-color:#eee;transition-duration:.3s;border-radius:25px!important;box-shadow:4px 3px 8px gray;border:4px solid var(--color-secondary)}.table-responsive[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:4px 3px 11px 6px gray}"]}),t})();var k=l(2080),ie=l(9139);let ne=(()=>{class t{constructor(r,s,n){this._formBuilder=r,this._searchBoxStore=s,this._salesStore=n,this.destroy$=new f.x}ngOnInit(){this.salesFilterFormObj=new L(this._formBuilder),this.salesFilterForm=this.salesFilterFormObj.InitForm(),this.salesFilterForm.get("filter")?.valueChanges.pipe((0,g.R)(this.destroy$),(0,h.b)(r=>{this._searchBoxStore.searchBoxTypedKeywords="",this._searchBoxStore.placeholder=`by ${r}`,this._salesStore.saleFilterKey=r})).subscribe()}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(i.qu),e.Y36(k.x),e.Y36($))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-sales-filter"]],decls:12,vars:2,consts:[[1,"px-0","py-2","m-0","form-wrapper"],[1,"p-0","mx-4","form-group",3,"formGroup"],[1,"grid","grid-cols-1","gap-x-4","md:grid-cols-2","lg:grid-cols-4"],[1,"form-check","form-switch"],["for","sales-filter-name",1,"form-check-label","form-label"],["type","radio","value","SalesID","id","sales-filter-name","formControlName","filter",1,"form-check-input"],["for","sales-filter-category",1,"form-check-label","form-label"],["type","radio","value","CustomerID","id","sales-filter-category","formControlName","filter",1,"form-check-input"],[1,"col-span-2",3,"width"]],template:function(r,s){1&r&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Sales ID"),e.qZA(),e._UZ(6,"input",5),e.qZA(),e.TgZ(7,"div",3)(8,"label",6),e._uU(9,"Customer ID"),e.qZA(),e._UZ(10,"input",7),e.qZA(),e._UZ(11,"app-search-box",8),e.qZA()()()),2&r&&(e.xp6(1),e.Q6J("formGroup",s.salesFilterForm),e.xp6(10),e.Q6J("width","w-full"))},dependencies:[ie.B,i._Y,i.Fj,i._,i.JJ,i.JL,i.sg,i.u]}),t})();var le=l(9646);let ae=(()=>{class t{constructor(r,s){this._salesStore=r,this._searchBoxStore=s}transform(r){return this._searchBoxStore.placeholder="By Sales",this._searchBoxStore.searchBoxTypedKeywords="",(0,T.a)([(0,le.of)(r),this._salesStore.saleFilterKey$,this._searchBoxStore.searchBoxKeywords$]).pipe((0,w.U)(([s,n,c])=>""===c?s:s.filter(d=>"SalesID"===n?d.id.toString().replaceAll(" ","").toUpperCase().includes(c.replaceAll(" ","").toUpperCase()):d.customers.map(C=>C.id.toString()).includes(c))))}}return t.\u0275fac=function(r){return new(r||t)(e.Y36($,16),e.Y36(k.x,16))},t.\u0275pipe=e.Yjl({name:"filterSales",type:t,pure:!0}),t})();function ce(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"app-sale",6),e.NdJ("onSaleDelete",function(n){e.CHM(r);const c=e.oxw(3);return e.KtG(c.onSaleDelete(n))}),e.qZA()}if(2&t){const s=o.index;e.Q6J("filteredSale",o.$implicit)("filteredSaleIndex",s)}}function ue(t,o){1&t&&(e.TgZ(0,"app-spinner",7),e._uU(1),e.qZA()),2&t&&(e.Q6J("spinnerSize","1.5rem"),e.xp6(1),e.Oqu(" No Sales found as per the searched keyword. Try with some different keyword and filter option."))}function pe(t,o){if(1&t&&(e.ynx(0),e.YNc(1,ce,1,2,"app-sale",5),e.YNc(2,ue,2,2,"app-spinner",4),e.ALo(3,"json"),e.BQk()),2&t){const r=o.ngIf,s=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",r),e.xp6(1),e.Q6J("ngIf",s.length>0&&"[]"===e.lcZ(3,2,r))}}function de(t,o){1&t&&(e.TgZ(0,"app-spinner",7),e._uU(1),e.qZA()),2&t&&(e.Q6J("spinnerSize","1.5rem"),e.xp6(1),e.Oqu(" No Sale found to display."))}function me(t,o){if(1&t&&(e.ynx(0),e.YNc(1,pe,4,4,"ng-container",1),e.ALo(2,"async"),e.ALo(3,"filterSales"),e.YNc(4,de,2,2,"app-spinner",4),e.BQk()),2&t){const r=o.ngIf;e.oxw();const s=e.MAs(7);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,e.lcZ(3,5,r)))("ngIfElse",s),e.xp6(3),e.Q6J("ngIf",0===r.length)}}function fe(t,o){1&t&&(e.TgZ(0,"app-spinner",7),e._uU(1),e.qZA()),2&t&&(e.Q6J("spinnerSize","1.5rem"),e.xp6(1),e.Oqu(" Fetching Sales data from backend....."))}function he(t,o){1&t&&(e.TgZ(0,"app-spinner",7),e._uU(1),e.qZA()),2&t&&(e.Q6J("spinnerSize","1.5rem"),e.xp6(1),e.Oqu(" Applying filter based on keyword....."))}let ge=(()=>{class t{constructor(r){this._salesService=r}ngOnInit(){this.sales$=this._salesService.sales$()}onSaleDelete(r){console.log(r),this.ngOnInit()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-list-sales"]],decls:8,vars:4,consts:[[1,"m-4"],[4,"ngIf","ngIfElse"],["filteredSalesNotAvailable",""],["loadingFilteredSales",""],[3,"spinnerSize",4,"ngIf"],["class","my-4",3,"filteredSale","filteredSaleIndex","onSaleDelete",4,"ngFor","ngForOf"],[1,"my-4",3,"filteredSale","filteredSaleIndex","onSaleDelete"],[3,"spinnerSize"]],template:function(r,s){if(1&r&&(e.TgZ(0,"div",0),e._UZ(1,"app-sales-filter"),e.YNc(2,me,5,7,"ng-container",1),e.ALo(3,"async"),e.YNc(4,fe,2,2,"ng-template",null,2,e.W1O),e.YNc(6,he,2,2,"ng-template",null,3,e.W1O),e.qZA()),2&r){const n=e.MAs(5);e.xp6(2),e.Q6J("ngIf",e.lcZ(3,2,s.sales$))("ngIfElse",n)}},dependencies:[a.sg,a.O5,re.O,oe,ne,a.Ov,a.Ts,ae]}),t})();var _e=l(3900);function Ce(t,o){if(1&t&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._UZ(10,"i",5),e.qZA(),e.TgZ(11,"td"),e._UZ(12,"i",5),e.qZA(),e.TgZ(13,"td"),e._UZ(14,"i",5),e.qZA(),e.TgZ(15,"td"),e._UZ(16,"i",5),e.qZA(),e.TgZ(17,"td"),e._UZ(18,"i",5),e.qZA()()),2&t){const r=o.$implicit,s=o.index;e.xp6(2),e.Oqu(s),e.xp6(2),e.Oqu(r.id),e.xp6(2),e.Oqu(r.segment),e.xp6(2),e.Oqu(r.fuel),e.xp6(2),e.Q6J("ngClass",r.powerSteering?"bi-check-lg success":"bi-x-lg danger"),e.xp6(2),e.Q6J("ngClass",r.airBags?"bi-check-lg success":"bi-x-lg danger"),e.xp6(2),e.Q6J("ngClass",r.sunRoof?"bi-check-lg success":"bi-x-lg danger"),e.xp6(2),e.Q6J("ngClass",r.mattFinish?"bi-check-lg success":"bi-x-lg danger"),e.xp6(2),e.Q6J("ngClass",r.musicSystem?"bi-check-lg success":"bi-x-lg danger")}}let Se=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-car"]],inputs:{cars:"cars"},decls:26,vars:1,consts:[[1,"mx-3","my-3","table-responsive","caption-top"],[1,"w-full","text-2xl","font-semibold","text-center"],[1,"table","w-full","text-sm","bg-gray-300","border-collapse","dark:text-white","dark:bg-gray-700"],[1,"rounded-xl"],[4,"ngFor","ngForOf"],["aria-hidden","true",1,"bi",3,"ngClass"]],template:function(r,s){1&r&&(e.TgZ(0,"div",0)(1,"caption",1),e._uU(2," Cars "),e.qZA(),e.TgZ(3,"table",2)(4,"thead")(5,"tr",3)(6,"th"),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"id"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Segment"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"FuelType"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"PowerSteering"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"AirBags"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"SunRoof"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"MattFinish"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"MusicSystem"),e.qZA()()(),e.TgZ(24,"tbody"),e.YNc(25,Ce,19,9,"tr",4),e.qZA()()()),2&r&&(e.xp6(25),e.Q6J("ngForOf",s.cars))},dependencies:[a.mk,a.sg],styles:[".table-responsive[_ngcontent-%COMP%]{margin:15px 30px;background-color:#eee;transition-duration:.3s;border-radius:25px!important;box-shadow:4px 3px 8px gray;border:4px solid var(--color-secondary)}.table-responsive[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:4px 3px 11px 6px gray}"]}),t})();function ye(t,o){if(1&t&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&t){const r=o.$implicit,s=o.index;e.xp6(2),e.Oqu(s),e.xp6(2),e.Oqu(r.id),e.xp6(2),e.Oqu(r.gender),e.xp6(2),e.Oqu(r.income),e.xp6(2),e.Oqu(r.region),e.xp6(2),e.Oqu(r.maritalStatus)}}let ve=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-customer"]],inputs:{customers:"customers"},decls:20,vars:1,consts:[[1,"mx-3","my-3","table-responsive","caption-top"],[1,"w-full","text-2xl","font-semibold","text-center"],[1,"table","w-full","text-sm","bg-gray-300","border-collapse","dark:text-white","dark:bg-gray-700"],[1,"rounded-xl"],[4,"ngFor","ngForOf"]],template:function(r,s){1&r&&(e.TgZ(0,"div",0)(1,"caption",1),e._uU(2," Customers "),e.qZA(),e.TgZ(3,"table",2)(4,"thead")(5,"tr",3)(6,"th"),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"id"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Gender"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"IncomeCategory"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Region"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"MaritalStatus"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,ye,13,6,"tr",4),e.qZA()()()),2&r&&(e.xp6(19),e.Q6J("ngForOf",s.customers))},dependencies:[a.sg],styles:[".table-responsive[_ngcontent-%COMP%]{margin:15px 30px;background-color:#eee;transition-duration:.3s;border-radius:25px!important;box-shadow:4px 3px 8px gray;border:4px solid var(--color-secondary)}.table-responsive[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:4px 3px 11px 6px gray}"]}),t})();function be(t,o){1&t&&(e.TgZ(0,"small",14),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Date Of Purchase is Mandatory."))}function xe(t,o){1&t&&(e.TgZ(0,"small",14),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.Oqu("Selling Price is Mandatory."))}const Ze=function(t,o){return{"form-valid":t,"form-invalid":o}};function Oe(t,o){if(1&t&&(e.TgZ(0,"button",15),e._uU(1," Update "),e.qZA()),2&t){const r=e.oxw(2);e.Q6J("disabled",r.salesForm.invalid)("ngClass",e.WLB(2,Ze,!r.salesForm.invalid,r.salesForm.invalid))}}const Y=function(t,o){return{"is-invalid":t,"is-valid":o}};function Fe(t,o){if(1&t){const r=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.UpdateSale())}),e.TgZ(3,"div",3)(4,"div",4)(5,"label",5),e._uU(6,"Date Of Purchase"),e.qZA(),e._UZ(7,"input",6),e.YNc(8,be,2,1,"small",7),e.qZA(),e.TgZ(9,"div",8)(10,"label",9),e._uU(11,"Selling Price"),e.qZA(),e._UZ(12,"input",10),e.YNc(13,xe,2,1,"small",7),e.qZA()(),e._UZ(14,"app-car",11)(15,"app-customer",12),e.YNc(16,Oe,2,5,"button",13),e.qZA()(),e.BQk()}if(2&t){const r=o.ngIf,s=e.oxw();e.xp6(2),e.Q6J("formGroup",s.salesForm),e.xp6(5),e.Q6J("ngClass",e.WLB(9,Y,s.isInValid(s.value("dateOfPurchase")),s.isValid(s.value("dateOfPurchase")))),e.xp6(1),e.Q6J("ngIf",s.value("dateOfPurchase").touched&&(null==s.value("dateOfPurchase").errors?null:s.value("dateOfPurchase").errors.required)),e.xp6(4),e.Q6J("readonly","view"===s.mode)("ngClass",e.WLB(12,Y,s.isInValid(s.value("sellingPrice")),s.isValid(s.value("sellingPrice")))),e.xp6(1),e.Q6J("ngIf",s.value("sellingPrice").touched&&(null==s.value("sellingPrice").errors?null:s.value("sellingPrice").errors.required)),e.xp6(1),e.Q6J("cars",r.cars),e.xp6(1),e.Q6J("customers",r.customers),e.xp6(1),e.Q6J("ngIf","edit"===s.mode)}}const we=[{path:"",pathMatch:"full",redirectTo:u.x$.config.sale.viewAll},{path:u.x$.config.sale.create,component:te},{path:u.x$.config.sale.viewAll,component:ge},{path:`${u.x$.config.sale.viewOrEdit}/:id/:mode`,component:(()=>{class t{constructor(r,s,n,c,d,C){this._router=r,this._route=s,this._formBuilder=n,this._carsService=c,this._salesService=d,this._customersService=C,this.destroy$=new f.x,this.isValid=S.J,this.isInValid=S.T,this.SALES_PATH=u.x$.config.sale}ngOnInit(){this._salesFormObj=new P(this._formBuilder),this.salesForm=this._salesFormObj.InitForm(),this.sale$=this._route.params.pipe((0,h.b)(r=>this.mode=r.mode),(0,_e.w)(r=>this._salesService.saleById$(r.id).pipe((0,h.b)(s=>this.salesForm.patchValue(s)))))}value(r){return this.salesForm.controls[r]}UpdateSale(){console.log(this.salesForm.value),this._salesService.UpdateSale$(this.salesForm.value).pipe((0,g.R)(this.destroy$),(0,h.b)(()=>this._router.navigate([this.SALES_PATH.viewAll],{relativeTo:this._route.parent}))).subscribe()}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(m.F0),e.Y36(m.gz),e.Y36(i.qu),e.Y36(U),e.Y36(y),e.Y36(q))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-view-or-edit-sale"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"create-sale","form-wrapper"],[1,"form-group",3,"formGroup","ngSubmit"],[1,"grid","grid-cols-2","gap-4"],[1,"form-group","dateOfPurchase"],["for","dateOfPurchase",1,"form-label","required"],["readonly","","type","date","id","dateOfPurchase","formControlName","dateOfPurchase",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","SellingPrice"],["for","sellingPrice",1,"form-label","required"],["max","1000000","type","number","id","sellingPrice","formControlName","sellingPrice",1,"form-control",3,"readonly","ngClass"],[3,"cars"],[3,"customers"],["class","btn","type","submit",3,"disabled","ngClass",4,"ngIf"],[1,"invalid-feedback"],["type","submit",1,"btn",3,"disabled","ngClass"]],template:function(r,s){1&r&&(e.YNc(0,Fe,17,15,"ng-container",0),e.ALo(1,"async")),2&r&&e.Q6J("ngIf",e.lcZ(1,1,s.sale$))},dependencies:[a.mk,a.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.Fd,i.sg,i.u,Se,ve,a.Ov]}),t})()}];let $e=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.Bz.forChild(we),m.Bz]}),t})();var Ae=l(881);let Pe=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[a.ez]}),t})(),Ue=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[a.ez,$e,Pe,Ae.m]}),t})()}}]);
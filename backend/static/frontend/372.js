"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[372],{9372:(he,h,t)=>{t.r(h),t.d(h,{AuthModule:()=>_e});var c=t(6895),l=t(433),q=t(881),u=t(5294),g=t(3621),m=t(8434),S=t(727);function f(n,r){return a=>a.value?n.test(a.value)?null:r:null}var w=t(9646);function U(n){return r=>{let a=!1;const i=Object.keys(r.parent?.controls||{}).find(o=>r===r.parent?.get(o))||"";if(n){for(const o of n)if(Object.values(o)[Object.keys(o).indexOf(i)]==r.value){a=!0;break}}else console.log("No Data passed");return(0,w.of)(a?{alreadyTakenError:!0}:null)}}class Z{static LoginForm(){return(new l.qu).group({username:["",[l.kI.required]],password:["",[l.kI.required]],email:"amishm766@gmail.com"})}static SignUpForm(r){return(new l.qu).group({id:[""],username:["",[l.kI.required,l.kI.minLength(3),l.kI.maxLength(150)],U(r).bind(this)],first_name:[""],last_name:[""],email:["",[l.kI.required,l.kI.pattern("^([a-zA-Z0-9_.-]+)@([a-zA-Z0-9_.-]+)\\.([a-zA-Z]{2,5})$")],U(r).bind(this)],password:["",[l.kI.required,l.kI.minLength(8),l.kI.pattern("(?=[^A-Z]*[A-Z])(?=[^a-z]*[a-z])(?=[^0-9]*[0-9]).{8,}"),f(/\d/,{hasNumber:!0}),f(/[A-Z]/,{hasCapitalCase:!0}),f(/[a-z]/,{hasSmallCase:!0})]]})}}var e=t(4650),_=t(2542);function A(n,r){1&n&&(e.TgZ(0,"small",13),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Username is Mandatory."))}function y(n,r){1&n&&(e.TgZ(0,"small",13),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Password is Mandatory."))}const x=function(n,r){return{"is-invalid":n,"is-valid":r}},b=function(n,r){return{"form-valid":n,"form-invalid":r}},N=function(n){return["../",n]};let P=(()=>{class n{constructor(a,s,i){this._router=a,this._authService=s,this._activatedRoute=i,this.isValid=m.J,this.isInValid=m.T,this.subscriptions=S.w0,this.authenticationPath=g.x.config.auth}ngOnInit(){this.signInForm=Z.LoginForm(),this.returnUrl=this._activatedRoute.snapshot.queryParamMap.get("returnUrl")||`/${g.x.config.base.home}`}onClickSignIn(){this.returnUrl=this._activatedRoute.snapshot.queryParamMap.get("returnUrl")||`/${g.x.config.base.home}`,this._authService.signIn(this.signInForm.value).subscribe(()=>this._router.navigate([this.returnUrl]))}value(a){return this.signInForm.controls[a]}}return n.\u0275fac=function(a){return new(a||n)(e.Y36(u.F0),e.Y36(_.e),e.Y36(u.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:26,vars:19,consts:[[1,"container","flex","flex-col","items-center","justify-center","h-full"],[1,"mt-4","text-5xl","text-center"],[1,"form-wrapper"],[3,"formGroup"],[1,"form-group"],[1,"form-heading"],["for","username",1,"form-label","required"],["autofocus","","type","text","id","username","autocomplete","username","formControlName","username",1,"form-control","highlight",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","password",1,"form-label","required"],["required","","id","password","type","password","formControlName","password",1,"form-control","highlight",3,"ngClass"],["type","submit",1,"btn",3,"disabled","ngClass","click"],[1,"mx-1","link",3,"routerLink"],[1,"invalid-feedback"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2,"You're not logged in!"),e.qZA(),e.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"legend",5),e._uU(7,"Sign In"),e.qZA(),e.TgZ(8,"div",4)(9,"label",6),e._uU(10,"Username"),e.qZA(),e._UZ(11,"input",7),e.YNc(12,A,2,1,"small",8),e.qZA(),e.TgZ(13,"div",4)(14,"label",9),e._uU(15,"Password"),e.qZA(),e._UZ(16,"input",10),e.YNc(17,y,2,1,"small",8),e.qZA(),e.TgZ(18,"div",4)(19,"button",11),e.NdJ("click",function(){return s.onClickSignIn()}),e._uU(20," Sign in "),e.qZA()(),e.TgZ(21,"small",4)(22,"span"),e._uU(23,"Not registered yet?"),e.qZA(),e.TgZ(24,"a",12),e._uU(25,"Register Here"),e.qZA()()()()()()),2&a&&(e.xp6(4),e.Q6J("formGroup",s.signInForm),e.xp6(7),e.Q6J("ngClass",e.WLB(8,x,s.isInValid(s.value("username")),s.isValid(s.value("username")))),e.xp6(1),e.Q6J("ngIf",s.value("username").touched&&(null==s.value("username").errors?null:s.value("username").errors.required)),e.xp6(4),e.Q6J("ngClass",e.WLB(11,x,s.isInValid(s.value("password")),s.isValid(s.value("password")))),e.xp6(1),e.Q6J("ngIf",s.value("password").touched&&(null==s.value("password").errors?null:s.value("password").errors.required)),e.xp6(2),e.Q6J("disabled",s.signInForm.invalid)("ngClass",e.WLB(14,b,!s.signInForm.invalid,s.signInForm.invalid)),e.xp6(5),e.Q6J("routerLink",e.VKq(17,N,s.authenticationPath.signUp)))},dependencies:[c.mk,c.O5,u.yS,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u]}),n})(),O=(()=>{class n{constructor(a,s){this._router=a,this._authService=s}ngOnInit(){this.signOutSub=this._authService.signOut().subscribe()}ngOnDestroy(){this.signOutSub&&this.signOutSub.unsubscribe()}}return n.\u0275fac=function(a){return new(a||n)(e.Y36(u.F0),e.Y36(_.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:0,vars:0,template:function(a,s){}}),n})();var J=t(8306),C=t(1566),F=t(3532);var L=t(3900),k=t(8505),v=t(3099),d=t(2824),V=t(529);let M=(()=>{class n{constructor(a){this._http=a,this._USER_URL=`/${d.sh.config.base.home}/${d.sh.config.user.root}`,this.userById$=s=>this._http.get(`${this._USER_URL}/${d.sh.config.user.detail}/${s}`).pipe((0,v.B)()),this.allUsers$=this._http.get(`${this._USER_URL}/${d.sh.config.user.detail}`).pipe((0,v.B)())}}return n.\u0275fac=function(a){return new(a||n)(e.LFG(V.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var E=t(4132);function B(n,r){1&n&&(e.TgZ(0,"small",21),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Username is already Taken."))}function j(n,r){1&n&&(e.TgZ(0,"small",21),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Username is Mandatory."))}function R(n,r){1&n&&(e.TgZ(0,"small",22),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.hij(" ","*Username need atleast 3 characters."," "))}function $(n,r){if(1&n&&(e.TgZ(0,"small",22),e._uU(1),e.qZA()),2&n){const a=e.oxw(2);e.xp6(1),e.lnq("","*Username need"," ",(null==a.value("username").errors?null:a.value("username").errors.minlength.requiredLength)-(null==a.value("username").errors?null:a.value("username").errors.minlength.actualLength)," ","more characters.","")}}function z(n,r){1&n&&(e.TgZ(0,"small",21),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Email is already Taken."))}function W(n,r){1&n&&(e.TgZ(0,"small",21),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Enter email in valid format."))}function D(n,r){1&n&&(e.TgZ(0,"small",21),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Email is Mandatory."))}function G(n,r){1&n&&(e.TgZ(0,"small",21),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Enter password in valid format."))}function X(n,r){1&n&&(e.TgZ(0,"small",21),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Password is Mandatory."))}function H(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("*Need 8 characters including a number,an Uppercase and lowercase letter."))}function K(n,r){if(1&n&&e.YNc(0,H,2,1,"span",24),2&n){const a=e.oxw(3);e.Q6J("ngIf",!a.isValid(a.value("password")))}}function ee(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("characters, "))}function ne(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("character, "))}function ae(n,r){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,ee,2,1,"span",24),e.YNc(3,ne,2,1,"span",24),e.qZA()),2&n){const a=e.oxw(4);e.xp6(1),e.hij(" ",(null==a.value("password").errors?null:a.value("password").errors.minlength.requiredLength)-(null==a.value("password").errors?null:a.value("password").errors.minlength.actualLength)," "),e.xp6(1),e.Q6J("ngIf",(null==a.value("password").errors?null:a.value("password").errors.minlength.requiredLength)-(null==a.value("password").errors?null:a.value("password").errors.minlength.actualLength)>1),e.xp6(1),e.Q6J("ngIf",(null==a.value("password").errors?null:a.value("password").errors.minlength.requiredLength)-(null==a.value("password").errors?null:a.value("password").errors.minlength.actualLength)<=1)}}function re(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("a number, "))}function se(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("an Uppercase "))}function le(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.hij("","and lowercase"," "))}function te(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu(" letter."))}function ie(n,r){if(1&n&&(e.TgZ(0,"div"),e._uU(1," *Need "),e.YNc(2,ae,4,3,"span",24),e.YNc(3,re,2,1,"span",24),e.YNc(4,se,2,1,"span",24),e.YNc(5,le,2,1,"span",24),e.YNc(6,te,2,1,"span",24),e.qZA()),2&n){const a=e.oxw(3);e.xp6(2),e.Q6J("ngIf",null==a.value("password").errors?null:a.value("password").errors.minlength),e.xp6(1),e.Q6J("ngIf",null==a.value("password").errors?null:a.value("password").errors.hasNumber),e.xp6(1),e.Q6J("ngIf",null==a.value("password").errors?null:a.value("password").errors.hasCapitalCase),e.xp6(1),e.Q6J("ngIf",null==a.value("password").errors?null:a.value("password").errors.hasSmallCase),e.xp6(1),e.Q6J("ngIf",(null==a.value("password").errors?null:a.value("password").errors.hasSmallCase)||(null==a.value("password").errors?null:a.value("password").errors.hasCapitalCase))}}function oe(n,r){if(1&n&&(e.TgZ(0,"small",22),e.YNc(1,K,1,1,"ng-template",null,23,e.W1O),e.YNc(3,ie,7,5,"div",0),e.qZA()),2&n){const a=e.MAs(2),s=e.oxw(2);e.xp6(3),e.Q6J("ngIf",s.value("password").dirty&&s.value("password").errors&&!(null!=s.value("password").errors&&s.value("password").errors.required))("ngIfElse",a)}}const ue=function(n,r){return{"is-invalid":n,"is-valid":r}},T=function(n,r){return{"is-valid":n,"is-invalid":r}},ge=function(n,r){return{"form-valid":n,"form-invalid":r}};function pe(n,r){if(1&n){const a=e.EpF();e.ynx(0),e.TgZ(1,"div",2)(2,"div",3)(3,"form",4)(4,"div",5)(5,"legend",6),e._uU(6,"Register"),e.qZA(),e.TgZ(7,"div",5)(8,"label",7),e._uU(9,"Username"),e.qZA(),e._UZ(10,"input",8),e.TgZ(11,"div",9),e._uU(12,"Username is available."),e.qZA(),e.YNc(13,B,2,1,"small",10),e.YNc(14,j,2,1,"small",10),e.YNc(15,R,2,1,"small",11),e.YNc(16,$,2,3,"small",11),e.qZA(),e.TgZ(17,"div",5)(18,"label",12),e._uU(19,"First Name"),e.qZA(),e._UZ(20,"input",13),e.qZA(),e.TgZ(21,"div",5)(22,"label",14),e._uU(23,"Last Name"),e.qZA(),e._UZ(24,"input",15),e.qZA(),e.TgZ(25,"div",5)(26,"label",16),e._uU(27,"Email"),e.qZA(),e._UZ(28,"input",17),e.TgZ(29,"div",9),e._uU(30,"Email is available."),e.qZA(),e.YNc(31,z,2,1,"small",10),e.YNc(32,W,2,1,"small",10),e.YNc(33,D,2,1,"small",10),e.qZA(),e.TgZ(34,"div",5)(35,"label",18),e._uU(36,"Password"),e.qZA(),e._UZ(37,"input",19),e.TgZ(38,"div",9),e._uU(39,"Password is in Valid format."),e.qZA(),e.YNc(40,G,2,1,"small",10),e.YNc(41,X,2,1,"small",10),e.YNc(42,oe,4,2,"small",11),e.qZA(),e.TgZ(43,"button",20),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return e.KtG(i.signUp())}),e._uU(44," Register "),e.qZA()()()()(),e.BQk()}if(2&n){const a=e.oxw();e.xp6(3),e.Q6J("formGroup",a.signUpForm),e.xp6(7),e.Q6J("ngClass",e.WLB(16,ue,a.isInValid(a.value("username")),a.isValid(a.value("username")))),e.xp6(3),e.Q6J("ngIf",null==a.value("username").errors?null:a.value("username").errors.alreadyTakenError),e.xp6(1),e.Q6J("ngIf",a.value("username").touched&&(null==a.value("username").errors?null:a.value("username").errors.required)),e.xp6(1),e.Q6J("ngIf",!a.value("username").dirty||(null==a.value("username").errors?null:a.value("username").errors.required)),e.xp6(1),e.Q6J("ngIf",(null==a.value("username").errors?null:a.value("username").errors.minlength)&&a.value("username").dirty),e.xp6(12),e.Q6J("ngClass",e.WLB(19,T,a.isValid(a.value("email")),a.isInValid(a.value("email")))),e.xp6(3),e.Q6J("ngIf",null==a.value("email").errors?null:a.value("email").errors.alreadyTakenError),e.xp6(1),e.Q6J("ngIf",a.isInValid(a.value("email"))&&(null==a.value("email").errors?null:a.value("email").errors.pattern)),e.xp6(1),e.Q6J("ngIf",a.value("email").touched&&(null==a.value("email").errors?null:a.value("email").errors.required)),e.xp6(4),e.Q6J("ngClass",e.WLB(22,T,a.isValid(a.value("password")),a.isInValid(a.value("password")))),e.xp6(3),e.Q6J("ngIf",a.value("password").touched&&(null==a.value("password").errors?null:a.value("password").errors.pattern)),e.xp6(1),e.Q6J("ngIf",a.value("password").touched&&(null==a.value("password").errors?null:a.value("password").errors.required)),e.xp6(1),e.Q6J("ngIf",(null==a.value("password").errors?null:a.value("password").errors.required)||a.value("password").dirty),e.xp6(1),e.Q6J("disabled",a.signUpForm.invalid)("ngClass",e.WLB(25,ge,!a.signUpForm.invalid,a.signUpForm.invalid))}}function ce(n,r){1&n&&(e.TgZ(0,"app-spinner",25),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Fetching required details"))}const de=[{path:"",pathMatch:"full",redirectTo:g.x.config.auth.signIn},{path:g.x.config.auth.signIn,component:P},{path:g.x.config.auth.signUp,component:(()=>{class n{constructor(a,s,i){this._router=a,this._authService=s,this._userService=i,this.isValid=m.J,this.isInValid=m.T}value(a){return this.signUpForm.controls[a]}ngOnInit(){this.allUsers$=function Q(n=0,r,a=C.P){let s=-1;return null!=r&&((0,F.K)(r)?a=r:s=r),new J.y(i=>{let o=function Y(n){return n instanceof Date&&!isNaN(n)}(n)?+n-a.now():n;o<0&&(o=0);let p=0;return a.schedule(function(){i.closed||(i.next(p++),0<=s?this.schedule(void 0,s):i.complete())},o)})}(0,1e4).pipe((0,L.w)(()=>this._userService.allUsers$),(0,k.b)(a=>{this.signUpForm||(this.signUpForm=Z.SignUpForm(a))}),(0,v.B)())}signUp(){this.signUpSubs=this._authService.signUp(this.signUpForm.value).subscribe(a=>{alert("Hit the link sent to "+a.user.email+" to activate acount"),this._router.navigate(["/auth"])})}ngOnDestroy(){this.signUpSubs&&this.signUpSubs.unsubscribe()}}return n.\u0275fac=function(a){return new(a||n)(e.Y36(u.F0),e.Y36(_.e),e.Y36(M))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["userDetailsNotFetched",""],[1,"md:grid","md:grid-cols-3"],[1,"form-wrapper"],[3,"formGroup"],[1,"form-group"],[1,"form-heading"],["for","username",1,"form-label","required"],["type","text","id","username","formControlName","username",1,"form-control","highlight",3,"ngClass"],[1,"valid-feedback"],["class","invalid-feedback",4,"ngIf"],["style","color: grey",4,"ngIf"],["for","first_name",1,"form-label"],["type","text","id","first_name","formControlName","first_name",1,"form-control","highlight"],["for","last_name",1,"form-label"],["type","text","id","last_name","formControlName","last_name",1,"form-control","highlight"],["for","email",1,"form-label","required"],["id","email","type","email","formControlName","email",1,"form-control","highlight",3,"ngClass"],["for","password",1,"form-label","required"],["id","password","type","password","formControlName","password",1,"form-control","highlight",3,"ngClass"],["type","submit",1,"btn",3,"disabled","ngClass","click"],[1,"invalid-feedback"],[2,"color","grey"],["initialText",""],[4,"ngIf"],["spinnerSize","2rem"]],template:function(a,s){if(1&a&&(e.YNc(0,pe,45,28,"ng-container",0),e.ALo(1,"async"),e.YNc(2,ce,2,1,"ng-template",null,1,e.W1O)),2&a){const i=e.MAs(3);e.Q6J("ngIf",e.lcZ(1,2,s.allUsers$))("ngIfElse",i)}},dependencies:[c.mk,c.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,E.O,c.Ov]}),n})()},{path:g.x.config.auth.signOut,component:O}];let fe=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.Bz.forChild(de),u.Bz]}),n})(),_e=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,fe,l.UX,q.m]}),n})()}}]);